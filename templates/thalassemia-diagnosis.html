<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ch·∫©n ƒëo√°n Thalassemia & D·ª± ƒëo√°n Di truy·ªÅn</title>
    <link rel="stylesheet" href="../static/thalassemia-style.css">
</head>
<body>

  <h1>Ch·∫©n ƒëo√°n b·ªánh Thalassemia & D·ª± ƒëo√°n di truy·ªÅn</h1>

  <div class="container">
    <div class="grid">
      <div class="section">
        <h2>üë® Th√¥ng tin Cha</h2>
        <label>Nh√≥m m√°u</label>
        <select id="fatherBlood">
          <option value="">-- Ch·ªçn --</option>
          <option>A</option>
          <option>B</option>
          <option>AB</option>
          <option>O</option>
        </select>

        <label>Ki·ªÉu gen Beta globin</label>
        <select id="fatherGene">
          <option value="">-- Ch·ªçn --</option>
          <option>AA</option>
          <option>Aa</option>
          <option>aa</option>
        </select>

        <label>
          <input type="checkbox" class="input-check"> C√≥ ng∆∞·ªùi th√¢n b·ªã Thalassemia
        </label>
        <label class="check-label">
          <input type="checkbox" class="input-check"> C√≥ tri·ªáu ch·ª©ng thi·∫øu m√°u / da nh·ª£t nh·∫°t
        </label>
      </div>

      <div class="section">
        <h2>üë© Th√¥ng tin M·∫π</h2>
        <label>Nh√≥m m√°u</label>
        <select id="motherBlood">
          <option value="">-- Ch·ªçn --</option>
          <option>A</option>
          <option>B</option>
          <option>AB</option>
          <option>O</option>
        </select>

        <label>Ki·ªÉu gen Beta globin</label>
        <select id="motherGene">
          <option value="">-- Ch·ªçn --</option>
          <option>AA</option>
          <option>Aa</option>
          <option>aa</option>
        </select>

        <label>
          <input type="checkbox" id="motherFamilyHistory"> C√≥ ng∆∞·ªùi th√¢n b·ªã Thalassemia
        </label>
        <label>
          <input type="checkbox" id="motherSymptoms"> C√≥ tri·ªáu ch·ª©ng thi·∫øu m√°u / da nh·ª£t nh·∫°t
        </label>
      </div>
    </div>

    <div class="section">
      <button onclick="diagnose()">Ch·∫©n ƒëo√°n</button>
      <button onclick="predict()">D·ª± ƒëo√°n di truy·ªÅn</button>
    </div>

    <div id="result" class="result" style="display:none;"></div>
  </div>

  <div class="footer">
    ¬© 2025 H·ªá chuy√™n gia Thalassemia ‚Äì M√¥ ph·ªèng suy di·ªÖn ti·∫øn & l√πi
  </div>

  <script>
    function diagnose() {
      const fGene = document.getElementById("fatherGene").value;
      const mGene = document.getElementById("motherGene").value;
      const fSym = document.getElementById("fatherSymptoms").checked;
      const mSym = document.getElementById("motherSymptoms").checked;

      let result = "<h3>K·∫øt qu·∫£ ch·∫©n ƒëo√°n:</h3>";
      let reasoning = "";

      // Forward chaining logic
      function checkGene(gen, hasSymptoms) {
        if (gen === "aa") return "b·ªã Thalassemia th·ªÉ n·∫∑ng";
        if (gen === "Aa" && hasSymptoms) return "Thalassemia th·ªÉ nh·∫π";
        if (gen === "Aa" && !hasSymptoms) return "ng∆∞·ªùi l√†nh mang gen b·ªánh";
        return "b√¨nh th∆∞·ªùng";
      }

      const fatherDiag = checkGene(fGene, fSym);
      const motherDiag = checkGene(mGene, mSym);

      reasoning += `Cha: ${fatherDiag}<br>`;
      reasoning += `M·∫π: ${motherDiag}<br>`;

      result += reasoning;
      result += "<hr>";

      if (fGene && mGene) {
        result += `<b>G·ª£i √Ω:</b> C·∫£ hai ƒë·ªÅu ${fGene === "Aa" && mGene === "Aa" ? "mang gen b·ªánh ‚Üí nguy c∆° cao con m·∫Øc b·ªánh!" : "c√≥ th·ªÉ an to√†n nh∆∞ng n√™n x√©t nghi·ªám th√™m."}`;
      }

      const div = document.getElementById("result");
      div.innerHTML = result;
      div.style.display = "block";
    }

    function predict() {
      const fGene = document.getElementById("fatherGene").value;
      const mGene = document.getElementById("motherGene").value;
      let result = "<h3>D·ª± ƒëo√°n di truy·ªÅn cho con:</h3>";

      if (!fGene || !mGene) {
        alert("Vui l√≤ng ch·ªçn ki·ªÉu gen cho c·∫£ cha v√† m·∫π!");
        return;
      }

      let outcomes = "";
      if (fGene === "AA" && mGene === "AA") outcomes = "100% b√¨nh th∆∞·ªùng (AA)";
      else if ((fGene === "Aa" && mGene === "AA") || (fGene === "AA" && mGene === "Aa"))
        outcomes = "50% b√¨nh th∆∞·ªùng (AA), 50% mang gen (Aa)";
      else if (fGene === "Aa" && mGene === "Aa")
        outcomes = "25% b√¨nh th∆∞·ªùng (AA), 50% mang gen (Aa), 25% b·ªã b·ªánh (aa)";
      else if ((fGene === "aa" && mGene === "Aa") || (fGene === "Aa" && mGene === "aa"))
        outcomes = "50% mang gen (Aa), 50% b·ªã b·ªánh (aa)";
      else if (fGene === "aa" && mGene === "aa")
        outcomes = "100% con b·ªã b·ªánh (aa)";
      else
        outcomes = "D·ªØ li·ªáu ch∆∞a ƒë·ªß ƒë·ªÉ x√°c ƒë·ªãnh.";

      result += `<p>${outcomes}</p>`;
      result += "<p><b>Gi·∫£i th√≠ch:</b> K·∫øt qu·∫£ d·ª±a tr√™n quy lu·∫≠t di truy·ªÅn Mendel (Punnett Square).</p>";

      const div = document.getElementById("result");
      div.innerHTML = result;
      div.style.display = "block";
    }
  </script>
</body>
</html>
